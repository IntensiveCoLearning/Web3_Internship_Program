---
timezone: UTC+8
---

# jessiewang

**GitHub ID:** XXXJCSAMA

**Telegram:** @jessiewang_0914

## Self-introduction

rust solana

## Notes

<!-- Content_START -->
# 2025-08-08

是区块链的核心机制，决定了网络如何达成状态一致性和安全性。不同场景（如公链、联盟链、DeFi专用链）需要权衡去中心化、安全性、性能三大特性。以下是针对不同场景的共识算法详解，重点包括PoW/PoS的取舍和DeFi专用链（如Tendermint）的设计逻辑：

---
1. 公链场景：PoW vs PoS 的取舍
(1) PoW（Proof of Work，工作量证明）
- 代表链：比特币、以太坊（早期）。
- 核心机制：
  - 节点通过计算哈希难题（如SHA-256）竞争出块权，消耗大量算力。
  - 最长链原则：恶意节点需掌握51%算力才能篡改历史。
- 适用场景：
  - 高安全性需求：适合无需许可的公链，抗Sybil攻击能力强。
  - 去中心化优先：矿工分布广泛，无质押门槛。
- 缺点：
  - 能耗高：比特币年耗电量超挪威全国。
  - 吞吐量低：比特币仅7 TPS，确认慢（6区块确认≈1小时）。
(2) PoS（Proof of Stake，权益证明）
- 代表链：以太坊2.0、Cardano。
- 核心机制：
  - 节点通过质押代币获得出块权，恶意行为会导致质押金被罚没（Slashing）。
  - 随机选择验证者（如以太坊的RANDAO+VDF）。
- 适用场景：
  - 高性能需求：以太坊2.0目标TPS可达10万（分片后）。
  - 节能环保：无算力竞争。
- 缺点：
  - 富者愈富：持币大户更容易获得奖励。
  - 长程攻击风险：需通过检查点（Checkpoint）或弱主观性防御。
(3) PoW vs PoS 的取舍
暂时无法在飞书文档外展示此内容

---
2. DeFi专用链场景：Tendermint（BFT共识）
(1) 为什么DeFi需要专用共识？
- 需求：DeFi应用需要快速最终性（Finality）和高确定性（交易顺序不可逆），避免MEV抢跑或分叉风险。
- 问题：PoW/PoS的概率最终性（如比特币6区块确认）可能导致双花或重组攻击。
(2) Tendermint（BFT类共识）
- 代表链：Cosmos Hub、Binance Chain。
- 核心机制：
  - PBFT（实用拜占庭容错）变体：验证者轮流出块，需2/3以上节点签名确认区块。
  - 即时最终性：一旦区块被提交，不可回滚（无分叉）。
  - 轻客户端友好：可通过默克尔证明快速验证状态。
- 优势：
  - 低延迟：出块时间1-3秒，适合订单簿DEX（如dYdX）。
  - 确定性：交易顺序固定，减少MEV套利窗口。
- 缺点：
  - 节点数限制：通常100-150个验证者，牺牲去中心化。
  - 活跃性风险：需2/3节点在线，否则网络停滞。
(3) DeFi链的共识优化案例
- Osmosis（Cosmos SDK）：
  - 通过阈值加密隐藏交易内容，减少前端跑。
  - 区块空间拍卖：优先处理高Gas费交易，对抗MEV。
- Sei Network：
  - 并行化执行：基于交易依赖关系加速AMM结算。

---
1. 其他场景的共识选择
(1) 联盟链：PBFT/Raft
- 特点：节点身份已知，容忍1/3拜占庭节点。
- 用例：Hyperledger Fabric（金融机构间结算）。
(2) 高性能链：DAG类共识
- 代表：Solana的Tower BFT（PoH+PoS混合）。
- 优势：5万+ TPS，但需中心化硬件（如SSD服务器）。
(3) 隐私链：ZKP共识
- 代表：Mina的Ouroboros Samasika（递归零知识证明）。
- 特点：轻节点可验证整个链状态（仅22KB）。

---
2. 共识算法的关键权衡
3. 以太坊的混合共识：Casper FFG + LMD-GHOST
(1) 为什么需要混合共识？
- 问题：纯PoS可能导致长程攻击（Long-range Attack）——攻击者购买旧私钥重构历史链。
- 解决方案：结合最终确定性工具（Casper FFG）和分叉选择规则（LMD-GHOST）。
(2) Casper FFG（Friendly Finality Gadget）
- 核心机制：
  - 两阶段投票：验证者对周期（Epoch）内的区块进行prepare和commit投票。
  - 确定性条件：当2/3验证者对区块B的commit投票达成时，B被最终确定。
- 
- def is_finalized(block):    prepare_votes = get_votes(block, stage='prepare')    commit_votes = get_votes(block, stage='commit')    return len(prepare_votes) > 2/3 * total_stake and len(commit_votes) > 2/3 * total_stake  
- 惩罚条件（Slashing）：
  - 双重投票（同一高度投票给两个区块）。
  - 违反“非环绕投票”规则（投票的源区块必须递增）。
(3) LMD-GHOST（Latest Message Driven Greediest Heaviest Observed SubTree）
- 作用：在未最终确定的区块中选择“最重”的分支。
- 规则：
  - 从创世块开始，递归选择被最多验证者最新投票的子区块。
  - 权重计算：weight(block) = Σ(stake of validators whose latest vote is for block or its descendants)
(4) 攻击与防御
- 平衡攻击（Balancing Attack）：
  - 攻击者控制少量质押者，在分叉间交替投票以延迟确定性。
  - 防御：增加诚实节点的同步假设（如≥66%节点在线）。

---

# 2025-08-07

dex uniswap理解
https://x.com/jessiewang0914/status/1953437426573025775
dex：假如某个项目想要发行自己的资产供用户交易。在传统的中心化交易所，这可能需要与交易所签订繁琐的合同，并让研发人员与系统进行对接，整个流程复杂且不可靠。然而在去中心化交易所中，两步即可。1.将资产通过智能合约发布到链上；2.把资产加入去中心化交易所的流动性池，这样用户就能进行交易了。
实现去中心化交易所的关键考量
要实现一个去中心化交易所，除了用户操作页面外，智能合约是重中之重。智能合约承担着处理用户交易请求、保障交易安全与透明的重任。对于负责交易处理的智能合约而言，最关键的就是如何在合适的时间以合适的价格，确保各种资产安全完成交易。
像 Blur 这类专注于 NFT 交易的交易所，交易逻辑相对简单。卖方可以指定一个价格，授权合约进行出售，买方随后授权合约购买；或者买家出价，卖家出售，整个交易过程由智能合约保障，无需三方担保，由智能合约管理资金和资产，这就是订单簿交易所的模式。
然而，这种模式对于 FT（同质化代币）交易来说就有些力不从心了。因为 FT 交易量大，对流动性的要求极高，需要更高效的交易模式。通过订单簿进行交易，无论是存储还是撮合等操作都需要执行合约，这会消耗大量 Gas（即区块链上执行合约所需的手续费）。
所以，针对去中心化代币交易所，需要更高效的交易模式，也就是 AMM（自动化做市商）。从技术层面讲，AMM 就是智能合约要实现的交易逻辑，它负责处理用户交易请求、管理资金池、计算价格，并确保有足够的流动性来支撑交易。
简单来讲，可以通过引入流动性提供者（Liquidity Provider）来实现。这些 LP 会将一对资产存入资金池，并给出初始定价。交易者无需像 NFT 交易那样等待买家，可直接在流动性池中随时买卖，而资产价格会随着持续的交易行为而变动。LP 在这个过程中能够获得相应激励。

# 2025-08-06

https://x.com/jessiewang0914/status/1952980918219751870
Uniswap v3 core
Uniswap v3 是为以太坊虚拟机实现的非托管自动化做市商，相较于早期版本，它在资本效率、流动性提供者的控制程度、价格预言机的准确性和便利性以及费用结构灵活性等方面都有提升。核心：Concentrated Liquidity，Flexible Fees:Protocol Fee Governance:Improved Price OracleLiquidity Oracle。集中流动性（Concentrated Liquidity）：允许流动性提供者（LPs）将流动性限制在任意价格范围内（称为 “头寸”），仅需维持该范围内交易所需的储备，相当于在该范围内拥有更大的 “虚拟储备”，大幅提升资本效率。当价格超出范围时，头寸流动性不再活跃且不产生费用，仅由单一资产构成；若价格重回范围，流动性恢复活跃。LPs 可创建多个不同价格范围的头寸，灵活分配流动性。
灵活费用结构：不再固定 0.30% 的交易费率，每个资产对可对应多个池，每个池的费率在初始化时设定，初始支持 0.05%、0.30%、1% 三个等级，UNI 治理可添加更多等级。协议费用治理：UNI 治理可灵活设定协议收取的交易费用比例，且可按池单独设置。
改进的价格预言机：无需用户在计算时间加权平均价格（TWAP）时，精确记录时间段起始和结束时的累加器值，通过内置累加器 checkpoint 实现链上直接计算；同时改用对数价格累加，计算几何平均 TWAP，提升精度并减少存储需求。
流动性预言机：新增时间加权平均流动性预言机，追踪 的累加值，助力外部合约实现流动性挖矿等功能。

# 2025-08-05

https://intensivecolearn.ing/programs/Web3_Internship_Program
常见网络安全风险与攻击方式：钓鱼攻击（Phishing） 钓鱼攻击是最常见、最有效的网络攻击手段之一。攻击者通过伪造官方网站、社交账号、邮件、短信等，诱导受害者点击恶意链接、输入敏感信息（如助记词、私钥、账号密码），或下载恶意软件。伪造邮件/网站： 攻击者会仿冒知名企业、学校、项目方的邮箱或网站，发送“面试通知”“奖学金发放”“账号异常”等紧急信息，诱导你点击钓鱼链接。
社交平台钓鱼： 在微信群、QQ 群、Telegram、Discord 等社群中，冒充官方人员、HR、发布虚假招聘、空投
假冒客服/好友：冒充信任的人，诱导你转账或泄露信息

# 2025-08-04

区块链基础知识：
https://x.com/jessiewang0914/status/1952239481773514932
a blockchain is a distributed database
区块：存储交易记录     链：存储上一个区块的哈希
去中心化，不可篡改，公开透明
去中心化的网络由无数节点提供服务来维持网络运行，这些操作统称为挖矿。维持这些服务的人一般称之为矿工。区块链生态系统的运行包含以下几个关键步骤：
用户发起交易：用户通过钱包应用发起转账、智能合约调用等操作
交易广播：交易信息被广播到整个网络中的各个节点
节点验证：网络中的矿工节点验证交易的合法性（余额是否足够、签名是否正确等）。打包成块：通过共识机制（如工作量证明），矿工将验证过的交易打包成新的区块
链接上链：新区块被添加到区块链上，更新全网的账本状态
奖励发放：成功打包区块的矿工获得代币奖励和交易手续费。公链 vs 私链 vs 联盟链
公链（Public Blockchain） = 公共公园。公园里没有管理员，所有规则由大家共同制定。成为节点的方法：
无需申请，自由进出。所有人可见，去中心化（共识机制）。缺点：因为人太多，决策效率低（交易确认慢），维护成本高（比如电费、人力）联盟链（Consortium Blockchain） = 多公司联合的董事会。成为节点的方法：需要邀请或申请。权限分级：董事会成员可能分为两类：决策者（联盟核心成员）：比如银行 A、银行 B，可以修改数据库规则。
观察者（联盟普通成员）：比如物流公司，只能查看数据但不能修改。共同管理数据的模式：半公开数据：数据库里的信息（比如客户信用评分）只有董事会成员能看到，外人无法访问。 联合决策：如果要修改数据库规则（比如增加新字段），需要董事会成员投票通过。 优点：效率比公链高（因为成员少），隐私比公链好（数据不对外公开），但不如私链灵活（需要多方协调）。

# 2025.07.30


<!-- Content_END -->
